@model PostListingViewModel
@using System.Security.Claims


<div class="content-container">
  <h2 class="content-header">Posts</h2>
  <div class="content">
    @foreach(var post in Model.Posts) {
      <div class="bordered-bottom bordered-bottom-color post">
        <div class="row">   
          <div class="col-sm-10 item">
            <div class="row">
              <div class="col-sm-12">@post.Club.Name: @post.Category.Name: <a asp-action="Details" asp-controller="Post" asp-route-id="@post.Id" class="highlight-text">@post.Title</a></div>
              <div class="col-sm-9">
                <span class="author">Thread by @post.Author.FirstName on @post.DateCreated.ToString("dd, MMMM, yyyy hh:mm tt")</span>
              </div>
            </div> 
          </div>
          <div class="col-sm-2">
            <div class="row">
              <div class="col-sm-12"><span class="views">Views:</span> @post.Views</div>
              <div class="col-sm-12"><span class="replies">Replies:</span> @post.Comments.Count()</div>
            </div>
          </div>
          
        </div>
        @if(post.Author.Id == int.Parse(@User.FindFirst(ClaimTypes.NameIdentifier).Value)){
          <div class="row">
            <div class="col-sm-4">
              <div class="btn-group">
                <a asp-action="Delete" asp-controller="Post" class="btn btn-danger btn-sm"><i class="fa fa-trash"></i> delete</a>
                <a asp-action="Edit" asp-controller="Post" asp-route-id="@post.Id" class="btn btn-secondary btn-sm"><i class="fa fa-pencil"></i> edit</a>
              </div>
            </div>
          </div>
        }
      </div>
    }
  </div>
</div>