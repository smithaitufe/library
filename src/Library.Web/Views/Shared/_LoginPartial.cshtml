@using Microsoft.AspNetCore.Identity
@using System.Security.Claims;
@using Library.Core.Models;

@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager

@if (User.Identities.Any(u => u.IsAuthenticated))
{
    <form asp-area="" asp-controller="Home" asp-action="Logout" method="post" id="logoutForm" class="ml-auto">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="Manage" asp-action="Index" title="Manage">
                    Welcome 
                    @User.Identities.First(u => u.IsAuthenticated && 
               u.HasClaim(c => c.Type == ClaimTypes.GivenName)).FindFirst(ClaimTypes.GivenName).Value
                !</a>
            </li>
            <!--<li class="nav-item">      
                <a href="" onclick="document.getElementById('logoutForm').submit();" role="button" class="nav-link">
                    <span class="nav-link-icon"><i class="fa fa-sign-out"></i></span>
                    <span  style="">Log Out</span>
                </a>              
          </li>-->
          <li class="nav-item">                
            <button type="submit" class="btn-link nav-link pointer">
                <span class="nav-link-icon"><i class="fa fa-sign-out"></i></span>
                <span  style="">Log out</span>
            </button>                
          </li>
        </ul>
    </form>
}

